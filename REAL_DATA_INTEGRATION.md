# üîó –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —Å Telegram –±–æ—Ç–æ–º

## ‚úÖ **–ß–¢–û –ò–°–ü–†–ê–í–õ–ï–ù–û:**

### 1Ô∏è‚É£ **–£–±—Ä–∞–Ω—ã –≤—Å–µ –º–æ–∫–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ**

- **‚ùå –£–¥–∞–ª–µ–Ω—ã:** –°–ª—É—á–∞–π–Ω—ã–µ —á–∏—Å–ª–∞ –≤ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–µ –±–æ—Ç–∞
- **‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã:** –†–µ–∞–ª—å–Ω—ã–µ API –∑–∞–ø—Ä–æ—Å—ã –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é
- **‚úÖ –°–æ–∑–¥–∞–Ω–∞:** –°–∏—Å—Ç–µ–º–∞ fallback –¥–ª—è –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### 2Ô∏è‚É£ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –≤—Å–µ TODO –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏**

```javascript
// –ë–´–õ–û:
// TODO: –ó–¥–µ—Å—å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å API –≤—ã–∑–æ–≤ –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –ø—Ä–µ–º–∏—É–º —Ñ—É–Ω–∫—Ü–∏–π

// –°–¢–ê–õ–û:
const result = await activatePremiumFeature(from.id, itemId)
if (result.success) {
  console.log(`Premium feature ${itemId} activated for user ${from.id}`)
}
```

### 3Ô∏è‚É£ **–°–æ–∑–¥–∞–Ω—ã —Ä–µ–∞–ª—å–Ω—ã–µ API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã**

#### **üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**

```
GET /api/user/stats?telegramId=123456789
```

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**

```json
{
  "success": true,
  "data": {
    "totalDays": 15,
    "currentStreak": 5,
    "totalElements": 42,
    "dominantMood": "—Ä–∞–¥–æ—Å—Ç—å"
  }
}
```

#### **üòä –ó–∞–ø–∏—Å—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è**

```
POST /api/mood/record
Body: {
  "telegramUserId": 123456789,
  "mood": "joy",
  "date": "2025-09-23T10:00:00.000Z"
}
```

#### **‚≠ê –ê–∫—Ç–∏–≤–∞—Ü–∏—è –ø—Ä–µ–º–∏—É–º —Ñ—É–Ω–∫—Ü–∏–π**

```
POST /api/premium/activate
Body: {
  "telegramUserId": 123456789,
  "featureId": "rare_elements"
}
```

### 4Ô∏è‚É£ **–£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**

- **‚úÖ Fallback —Å–æ–æ–±—â–µ–Ω–∏—è** –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ API
- **‚úÖ –ü–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏** –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
- **‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è** –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- **‚úÖ Graceful degradation** - –±–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–∞–∂–µ –µ—Å–ª–∏ API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω

---

## üîç **–ù–û–í–û–ï –ü–û–í–ï–î–ï–ù–ò–ï –ë–û–¢–ê:**

### **üìä –ö–æ–º–∞–Ω–¥–∞ `/stats` (–¥–ª—è –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π):**

```
üìä –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ KiraKira!

üå± –í—ã —Ç–æ–ª—å–∫–æ –Ω–∞—á–∏–Ω–∞–µ—Ç–µ —Å–≤–æ–µ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ –≤ –º–∏—Ä —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ —Å–∞–¥–∞.

üì± –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏ –Ω–∞—á–Ω–∏—Ç–µ:
‚Ä¢ –û—Ç–º–µ—á–∞—Ç—å –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è
‚Ä¢ –í—ã—Ä–∞—â–∏–≤–∞—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ —Ä–∞—Å—Ç–µ–Ω–∏—è
‚Ä¢ –°–æ–±–∏—Ä–∞—Ç—å —Ä–µ–¥–∫–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã

–ü–æ—Å–ª–µ –ø–µ—Ä–≤—ã—Ö –∑–∞–ø–∏—Å–µ–π –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–π –∑–¥–µ—Å—å –ø–æ—è–≤–∏—Ç—Å—è –≤–∞—à–∞ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞!
```

### **üìä –ö–æ–º–∞–Ω–¥–∞ `/stats` (–¥–ª—è –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π):**

```
üìä –¢–≤–æ—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ KiraKira

üóìÔ∏è –î–Ω–µ–π —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º: 15
üî• –¢–µ–∫—É—â–∞—è —Å–µ—Ä–∏—è: 5 –¥–Ω–µ–π
üìà –õ—É—á—à–∞—è —Å–µ—Ä–∏—è: 8 –¥–Ω–µ–π
üå± –≠–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ —Å–∞–¥—É: 42
üíé –†–µ–¥–∫–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤: 3
üòä –ü—Ä–µ–æ–±–ª–∞–¥–∞—é—â–µ–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ: —Ä–∞–¥–æ—Å—Ç—å

üèÜ –ü—Ä–æ–¥–æ–ª–∂–∞–π –æ—Ç–º–µ—á–∞—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è –∫–∞–∂–¥—ã–π –¥–µ–Ω—å!
```

### **üòä –í—ã–±–æ—Ä –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è —á–µ—Ä–µ–∑ –±–æ—Ç–∞:**

- ‚úÖ **–†–µ–∞–ª—å–Ω–∞—è –∑–∞–ø–∏—Å—å** –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —á–µ—Ä–µ–∑ API
- ‚úÖ **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è** —Å –æ—Å–Ω–æ–≤–Ω—ã–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º
- ‚úÖ **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏** –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

### **‚≠ê –ü–æ–∫—É–ø–∫–∞ –ø—Ä–µ–º–∏—É–º —Ñ—É–Ω–∫—Ü–∏–π:**

- ‚úÖ **–†–µ–∞–ª—å–Ω–∞—è –∞–∫—Ç–∏–≤–∞—Ü–∏—è** —á–µ—Ä–µ–∑ API
- ‚úÖ **–í–∞–ª–∏–¥–∞—Ü–∏—è –ø–ª–∞—Ç–µ–∂–µ–π** –ø–æ Telegram Stars
- ‚úÖ **–ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –∞–∫—Ç–∏–≤–∞—Ü–∏—è** –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏

---

## üõ†Ô∏è **–ê–†–•–ò–¢–ï–ö–¢–£–†–ê –ò–ù–¢–ï–ì–†–ê–¶–ò–ò:**

```
[Telegram Bot] ‚Üê Webhook ‚Üí [Vercel Functions]
                               ‚Üì
                          [API Endpoints]
                               ‚Üì
                      [KiraKira –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ]
                               ‚Üì
                         [–õ–æ–∫–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ]
```

### **–ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö:**

1. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å** –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–º–∞–Ω–¥—É –±–æ—Ç—É
2. **Telegram** –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç webhook –Ω–∞ Vercel
3. **Webhook** –¥–µ–ª–∞–µ—Ç API –∑–∞–ø—Ä–æ—Å –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é
4. **API** –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–ø—Ä–æ—Å –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç
5. **–ë–æ—Ç** –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –æ—Ç–≤–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

---

## üîß **–ù–ê–°–¢–†–û–ô–ö–ê –í PRODUCTION:**

### **1. Environment Variables –Ω–∞ Vercel:**

```bash
TELEGRAM_BOT_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω_–±–æ—Ç–∞
VITE_APP_URL=https://kirakira-theta.vercel.app
```

### **2. Webhook URL –≤ @BotFather:**

```
https://kirakira-theta.vercel.app/api/telegram/webhook
```

### **3. Domain –¥–ª—è Login Widget:**

```
kirakira-theta.vercel.app
```

---

## üéØ **–†–ï–ó–£–õ–¨–¢–ê–¢:**

### **‚úÖ –î–û:**

- –ú–æ–∫–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –≤–≤–æ–¥–∏–ª–∏ –≤ –∑–∞–±–ª—É–∂–¥–µ–Ω–∏–µ
- TODO –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤ –∫–æ–¥–µ
- –ù–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–∫–∞–∑—ã–≤–∞–ª–∞ —Å–ª—É—á–∞–π–Ω—ã–µ —á–∏—Å–ª–∞

### **‚úÖ –ü–û–°–õ–ï:**

- –†–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ API
- –ß–µ—Å—Ç–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –º–µ–∂–¥—É –±–æ—Ç–æ–º –∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º
- Fallback –¥–ª—è –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ü–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

---

## üöÄ **–¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï:**

### **1. –¢–µ—Å—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏:**

```
/stats ‚Üí –î–æ–ª–∂–Ω–∞ –ø–æ–∫–∞–∑–∞—Ç—å —Ä–µ–∞–ª—å–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∏–ª–∏ welcome —Å–æ–æ–±—â–µ–Ω–∏–µ
```

### **2. –¢–µ—Å—Ç –∑–∞–ø–∏—Å–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è:**

```
/mood ‚Üí –í—ã–±–æ—Ä –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è ‚Üí –ó–∞–ø–∏—Å—å –¥–æ–ª–∂–Ω–∞ –ø–æ—è–≤–∏—Ç—å—Å—è –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
```

### **3. –¢–µ—Å—Ç –ø—Ä–µ–º–∏—É–º —Ñ—É–Ω–∫—Ü–∏–π:**

```
/premium ‚Üí –ü–æ–∫—É–ø–∫–∞ ‚Üí –§—É–Ω–∫—Ü–∏—è –¥–æ–ª–∂–Ω–∞ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å—Å—è –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
```

### **4. –ü—Ä–æ–≤–µ—Ä–∫–∞ API —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤:**

```bash
# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
curl "https://kirakira-theta.vercel.app/api/user/stats?telegramId=123"

# –ó–∞–ø–∏—Å—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è
curl -X POST "https://kirakira-theta.vercel.app/api/mood/record" \
  -H "Content-Type: application/json" \
  -d '{"telegramUserId":123,"mood":"joy"}'

# –ê–∫—Ç–∏–≤–∞—Ü–∏—è –ø—Ä–µ–º–∏—É–º
curl -X POST "https://kirakira-theta.vercel.app/api/premium/activate" \
  -H "Content-Type: application/json" \
  -d '{"telegramUserId":123,"featureId":"rare_elements"}'
```

**–¢–µ–ø–µ—Ä—å –±–æ—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ —á–µ—Å—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º! üéâ**
