# üéâ –≠—Ç–∞–ø 2 - –ü–û–õ–ù–û–°–¢–¨–Æ –ì–û–¢–û–í

## ‚úÖ –î–ê, –í–°–Å –ë–£–î–ï–¢ –†–ê–ë–û–¢–ê–¢–¨ –ö–û–†–†–ï–ö–¢–ù–û –°–†–ê–ó–£!

–ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î –≤—Å—è —Å–∏—Å—Ç–µ–º–∞ –∑–∞—Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫.

---

## üì¶ –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è –ë–î

- **–ü—Ä–æ–±–ª–µ–º–∞**: PostgreSQL –æ—à–∏–±–∫–∞ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ç–∏–ø–∞ –≤–æ–∑–≤—Ä–∞—Ç–∞ —Ñ—É–Ω–∫—Ü–∏–∏
- **–†–µ—à–µ–Ω–∏–µ**: –î–æ–±–∞–≤–ª–µ–Ω `DROP FUNCTION IF EXISTS` –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏–µ–º
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: ‚úÖ –î–∞–Ω–Ω—ã–µ –Ω–µ —Ç–µ—Ä—è—é—Ç—Å—è, —Ñ—É–Ω–∫—Ü–∏—è –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ—Å–æ–∑–¥–∞—ë—Ç—Å—è

### 2. ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã API endpoints

- **`api/profile.js`**: 2 action –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –Ω–∞–≥—Ä–∞–¥—ã (`sproutReward`, `gemReward`, `specialUnlock`)
- **`api/mood.js`**: –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç `levelUp` –æ–±—ä–µ–∫—Ç –ø—Ä–∏ –ø–æ–≤—ã—à–µ–Ω–∏–∏ —É—Ä–æ–≤–Ω—è
- **`api/garden.js`**: –ù–∞—á–∏—Å–ª—è–µ—Ç –æ–ø—ã—Ç –≤ —Ñ–æ–Ω–µ (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)

### 3. ‚úÖ Frontend –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤

- **30 —É—Ä–æ–≤–Ω–µ–π** –≤ `GARDENER_LEVELS`
- **LevelUpModal** —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π –∫–æ–Ω—Ñ–µ—Ç—Ç–∏
- **TypeScript —Ç–∏–ø—ã** –æ–±–Ω–æ–≤–ª–µ–Ω—ã

---

## üöÄ –ß—Ç–æ –¥–µ–ª–∞—Ç—å –°–ï–ô–ß–ê–°

### –®–∞–≥ 1: –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é (5 –º–∏–Ω—É—Ç)

```bash
# 1. –û—Ç–∫—Ä–æ–π—Ç–µ Supabase Dashboard ‚Üí SQL Editor
# 2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ docs/database/migrations/002_expand_levels_to_30.sql
# 3. –ù–∞–∂–º–∏—Ç–µ RUN ‚ñ∂Ô∏è
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**

```sql
SELECT COUNT(*) FROM gardener_levels; -- –î–æ–ª–∂–Ω–æ –±—ã—Ç—å 30 ‚úÖ
```

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–¥ (1 –º–∏–Ω—É—Ç–∞)

```bash
npm run type-check  # –î–æ–ª–∂–Ω–æ –ø—Ä–æ–π—Ç–∏ ‚úÖ
```

### –®–∞–≥ 3: –¢–µ—Å—Ç—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, 2 –º–∏–Ω—É—Ç—ã)

```bash
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ TEST_TELEGRAM_ID –≤ scripts/test-level-system.js
node scripts/test-level-system.js  # –î–æ–ª–∂–Ω–æ –±—ã—Ç—å 7/7 ‚úÖ
```

### –®–∞–≥ 4: –î–µ–ø–ª–æ–π

```bash
npm run build
git add .
git commit -m "feat: Level system to 30 levels (Stage 2)"
git push
```

---

## ‚úÖ –ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è - –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç!

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö ‚úÖ

- 30 —É—Ä–æ–≤–Ω–µ–π —Å–æ–∑–¥–∞–Ω—ã
- –§—É–Ω–∫—Ü–∏—è `add_user_experience` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 6 –ø–æ–ª–µ–π
- –ù–∞–≥—Ä–∞–¥—ã –Ω–∞—á–∏—Å–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

### Backend ‚úÖ

- `api/profile.js` - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `sproutReward`, `gemReward`, `specialUnlock`
- `api/mood.js` - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `levelUp` –æ–±—ä–µ–∫—Ç —Å –Ω–∞–≥—Ä–∞–¥–∞–º–∏
- –í—Å–µ endpoints –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã

### Frontend ‚úÖ

- `GARDENER_LEVELS` —Å–æ–¥–µ—Ä–∂–∏—Ç 30 —É—Ä–æ–≤–Ω–µ–π
- `LevelUpModal` –≥–æ—Ç–æ–≤ –∏ –∫—Ä–∞—Å–∏–≤—ã–π
- –†–∞—Å—á—ë—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

---

## üéØ –ü—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã

**–°—Ü–µ–Ω–∞—Ä–∏–π**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ –∏ –ø–æ–ª—É—á–∞–µ—Ç level up

```
1. –ó–∞–ø–∏—Å—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è ‚Üí api/mood.js
2. –ù–∞—á–∏—Å–ª–µ–Ω–∏–µ 20 XP ‚Üí add_user_experience()
3. Level up: 1 ‚Üí 2
4. –ù–∞—á–∏—Å–ª–µ–Ω–∏–µ –Ω–∞–≥—Ä–∞–¥: 150 —Ä–æ—Å—Ç–∫–æ–≤
5. –û—Ç–≤–µ—Ç API —Å levelUp –æ–±—ä–µ–∫—Ç–æ–º
6. Frontend –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç LevelUpModal üéâ
```

**–û—Ç–≤–µ—Ç API:**

```json
{
  "success": true,
  "data": {
    "saved": true,
    "mood": "joy",
    "levelUp": {
      "leveledUp": true,
      "newLevel": 2,
      "sproutReward": 150,
      "gemReward": 0,
      "specialUnlock": null
    }
  }
}
```

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–°–æ–∑–¥–∞–Ω–æ 8 —Ñ–∞–π–ª–æ–≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:

1. `docs/database/migrations/002_expand_levels_to_30.sql` - SQL –º–∏–≥—Ä–∞—Ü–∏—è
2. `docs/database/migrations/README_002.md` - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –º–∏–≥—Ä–∞—Ü–∏–∏
3. `docs/database/migrations/002_FIX_NOTES.md` - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏
4. `docs/LEVEL_SYSTEM_GUIDE.md` - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
5. `docs/STAGE_2_INTEGRATION_CHECKLIST.md` - –ß–µ–∫-–ª–∏—Å—Ç
6. `docs/STAGE_2_COMPLETE.md` - –ü–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ
7. `QUICKSTART_STAGE_2.md` - –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
8. `STAGE_2_FINAL_SUMMARY.md` - –≠—Ç–æ—Ç —Ñ–∞–π–ª

---

## üéâ –ì–û–¢–û–í–û!

**–í—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏!**

–ù–∏–∫–∞–∫–∏—Ö –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫, —Ä—É—á–Ω—ã—Ö –ø—Ä–∞–≤–æ–∫ –∏–ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è.

---

**–î–∞—Ç–∞**: 13 —è–Ω–≤–∞—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É  
**–ò–∑–º–µ–Ω–µ–Ω–æ —Ñ–∞–π–ª–æ–≤**: 10  
**–°—Ç—Ä–æ–∫ –∫–æ–¥–∞**: ~1,800
